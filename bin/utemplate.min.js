!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.Template=factory()}(this,function(){"use strict";function combine(array,values){var index=void 0;for(array=array.concat([]);(index=array.indexOf(void 0))!==-1&&values.length>0;)array[index]=values.shift();return array.concat(values)}function curry$(method){function transform(params){var context=void 0;return function(){for(var _len=arguments.length,input=Array(_len),_key=0;_key<_len;_key++)input[_key]=arguments[_key];var args=combine(params,array$(arguments));return context=context||this,args.length<method.length||args.some(function(it){return void 0===it})?transform(args):method.apply(context,args)}}return method.length<=1?method:transform([])}function negated$(it){return function(){return!it.apply(this,arguments)}}function pair(object){return Object.keys(object).map(function(key){return{key:key,value:object[key]}})}function flatten(array){var isArray=void 0,toArray=void 0,fromArray=void 0;for(isArray=function(it){return it.constructor===Array},toArray=function(it){return isArray(it)?it:[it]},fromArray=function(a,b){return a.concat(b)};array.some(isArray);)array=array.map(toArray).reduce(fromArray);return array}function equals(reference,object){return(void 0===reference?"undefined":_typeof(reference))===(void 0===object?"undefined":_typeof(object))&&reference.constructor===object.constructor&&(reference.constructor!==Object?reference===object:flatten([pair(reference),pair(object)]).every(function(item){return has(reference)(item.key)&&has(object)(item.key)&&equals(reference[item.key],object[item.key])}))}function exists(it){return void 0!==it&&null!==it}function attempt(mutation,subject){var parameters=void 0,alternative=void 0,response=void 0;return parameters=array$(arguments).slice(1),alternative=1===parameters.length?parameters[0]:parameters,response=mutation.apply(this,parameters),response||alternative}function inject(it,transform){function cycle(key,value){return value!==copy&&("function"==typeof value?attempt(transform,value):"object"===(void 0===value?"undefined":_typeof(value))?inject(value,transform):void 0)}var copy={};for(var key in it)copy[key]=cycle(key,it[key]);return copy}function prepare(it){var not=void 0,tmp=void 0;return not=inject(it,negated$),not=inject(not,curry$),tmp=inject(it,curry$),tmp.not=not,tmp}function decompose(array,initial){var composer=function(previous,current){return attempt(current,previous)},reducer=function(it){return array.reduce(composer,initial||it)};return initial?reducer(initial):reducer}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=(function(){function AwaitValue(value){this.value=value}function AsyncGenerator(gen){function send(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};back?back=back.next=request:(front=back=request,resume(key,arg))})}function resume(key,arg){try{var result=gen[key](arg),value=result.value;value instanceof AwaitValue?Promise.resolve(value.value).then(function(arg){resume("next",arg)},function(arg){resume("throw",arg)}):settle(result.done?"return":"normal",result.value)}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:!0});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:!1})}front=front.next,front?resume(front.key,front.arg):back=null}var front,back;this._invoke=send,"function"!=typeof gen.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)},AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)},AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)},{wrap:function(fn){return function(){return new AsyncGenerator(fn.apply(this,arguments))}},await:function(value){return new AwaitValue(value)}}}(),function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}),createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),array$=function(it){return Array.prototype.slice.call(it,0)},has=curry$(function(object,property){return object.hasOwnProperty(property)}),is$={element:function(object){return object.nodeType===document.ELEMENT_NODE},fragment:function(object){return object.nodeType===document.DOCUMENT_FRAGMENT_NODE},text:function(object){return object.nodeType===document.TEXT_NODE},equal:equals,existant:exists};is$=prepare(is$);var is=(function(){function Compare(reference){classCallCheck(this,Compare),this.reference=reference}return createClass(Compare,[{key:"element",value:function(object){var result=void 0;return result=function(it){return it.nodeType===document.ELEMENT_NODE}(object),result===!this.reference.polarity}},{key:"fragment",value:function(object){var result=void 0;return result=function(it){return it.nodeType===document.DOCUMENT_FRAGMENT_NODE}(object),result===!this.reference.polarity}},{key:"text",value:function(object){return function(it){return object.nodeType===document.TEXT_NODE}(object)===!this.reference.polarity}},{key:"equals",value:function(object,$reference){return reference=$reference||$reference}},{key:"existant",value:function(object){}}]),Compare}(),is$),as={array:array$,pair:pair,method:curry$,flatten:flatten,decomposed:decompose,attempt:attempt},Alchemist=function(){function Alchemist(element){classCallCheck(this,Alchemist),this.setElement(element)}return createClass(Alchemist,[{key:"setElement",value:function(element){return this.element=Alchemist.asElement(element),this}},{key:"getElement",value:function(){return this.element}}],[{key:"isQuerySelector",value:function(element){return"string"==typeof element}},{key:"fromQuerySelector",value:function(element){return document.querySelector(element)}},{key:"isSizzle",value:function(element){return"function"==typeof element}},{key:"fromSizzle",value:function(element){return element.get(0)}},{key:"isTemplate",value:function(element){return is.element(element)}},{key:"fromTemplate",value:function(element){return element.content}},{key:"isFragment",value:function(element){return is.fragment(element)&&element.hasChildNodes()}},{key:"fromFragment",value:function(element){return element.firstElementChild}},{key:"asElement",value:function(element){var waterfall=[Alchemist.fromQuerySelector,Alchemist.fromSizzle,Alchemist.fromTemplate,Alchemist.fromFragment],result=as.decomposed(waterfall,element);if(result&&is.element(result))return result}}]),Alchemist}(),Parasite=function(){function Parasite(mutator){classCallCheck(this,Parasite),this.setMutator(mutator)}return createClass(Parasite,[{key:"getChildren",value:function(element){return void 0!==element.content&&(element=element.content),as.array(element.childNodes)}},{key:"allChildren",value:function(element){var map=function(child){return is.element(child)?this.allChildren(child):child}.bind(this),children=this.getChildren(element).map(map);return as.flatten(children)}},{key:"getAttributes",value:function(element){return as.array(element.attributes)}},{key:"setChildren",value:function(element){var children=(this.setAttributes(element),this.getChildren(element));for(var key in children){var child=children[key],result=void 0;is.text(child)&&child.textContent.trim().length>0&&(result=this.mutator.apply(child,[child.textContent,arguments[1],children])),is.element(child)&&this.setChildren(child),is.existant(result)&&(child.textContent=result)}return element}},{key:"setAttributes",value:function(element){var attributes=this.getAttributes(element);for(var index in attributes){var attribute=attributes[index],result=void 0,name=void 0,value=void 0;name=attribute.name,value=attribute.value,element.hasAttribute(name)&&value.trim().length>0&&(result=this.mutator.apply(element,[attribute.value,attribute.name,attributes])),is.existant(result)&&element.setAttribute(attribute.name,result)}return attributes}},{key:"infect",value:function(element){return element=this.setChildren(element),this.infection=element,element}},{key:"addChildren",value:function(element){var children=void 0,sibilings=void 0;children=this.getChildren(this.infection),sibilings=this.getChildren(element);var _loop=function(index){var child=children[index];sibilings.every(function(it){return is.not.equal(child,it)})&&element.appendChild(child)};for(var index in children)_loop(index);return children}},{key:"setMutator",value:function(mutator){this.mutator=mutator}}]),Parasite}(),query=function(object,property){var filter=function(source){return source},reduce=function(source,key){return source[key]};return property.split(/[.{}]/g).filter(filter).reduce(reduce,object)},compile=function(value,data){var replacement=function(original,property){return query(data,property)||""};return value.trim().replace(/\{([^}]+)\}/g,replacement)},genetics=function(source){return function(input){return compile(input,source)}};return function(){function Milli(source){classCallCheck(this,Milli),this.source=Alchemist.asElement(source),this.methods=[],this.sources=[]}return createClass(Milli,[{key:"setMutations",value:function(source){this.methods}},{key:"setSources",value:function(method){var sources=void 0;sources=this.sources.map(method),this.sources=sources}},{key:"provide",value:function(){var output=void 0;if(output=this.output,is.not.existant(output))return!1;this.setSources(function(source){if(is.existant(source.children))return source;var parasite=void 0,children=void 0;return parasite=source.parasite,source.compiled,children=parasite.addChildren(output),source.children=children,source})}},{key:"generate",value:function(){var template=void 0,methods=void 0;template=this.source,methods=this.methods;var isInfected=function(it){var content=it.parsed||it.content;return is.not.existant(it.parasite)&&(it.parasite=new Parasite(genetics(content))),it.parasite},isCompiled=function(it){if(is.not.existant(it.compiled)){var cloned=template.cloneNode(!0);it.parasite.infect(cloned)}return it.compiled},eachMutation=function(it){var result=void 0;return result=methods.reduce(function(previous,current,index){var rendered=void 0;return rendered=current(previous),it.mutations[index]=rendered,rendered||previous},it.content),it.parsed=result,result},isMutation=function(it){return is.not.existant(it.mutations)&&(it.mutations=[]),it.mutations.length<methods.length&&eachMutation(it),it.mutations};this.setSources(function(source){isMutation(source),isInfected(source),isCompiled(source);return source})}},{key:"setDestination",value:function(it){var element=void 0;return element=Alchemist.asElement(it),!is.not.existant(element)&&(this.output=element,this.sources.length>0&&this.provide(),element)}},{key:"fromObject",value:function(it){var packet=void 0;return it.constructor===Object&&(packet={},packet.content=it,this.sources.push(packet),this.generate(),this.provide(),it)}},{key:"fromMethod",value:function(it){return it.constructor===Function&&(this.generate(),this.methods.push(it),it)}},{key:"pipe",value:function(object){var _this=this,waterfall=void 0,result=void 0;return waterfall=[this.setDestination,this.fromObject,this.fromMethod],waterfall.some(function(method){return result=method.call(_this,object)}),this}}],[{key:"version",get:function(){return"2.2.5"}}]),Milli}()});
//# sourceMappingURL=bin/utemplate.min.js.map