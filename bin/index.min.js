!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Template=t()}(this,function(){"use strict";function e(e,t){var n;for(e=e.concat([]);(n=e.indexOf(void 0))!==-1&&t.length>0;)e[n]=t.shift();return e.concat(t)}function t(t){function n(r){var u;return function(){var i=e(r,y(arguments));return u=u||this,i.length<t.length||i.some(function(e){return void 0===e})?n(i):t.apply(u,i)}}return t.length<=1?t:n([])}function n(e){return function(){return!e.apply(this,arguments)}}function r(e){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})}function u(e){var t,n,r;for(t=function(e){return e.constructor===Array},n=function(e){return t(e)?e:[e]},r=function(e,t){return e.concat(t)};e.some(t);)e=e.map(n).reduce(r);return e}function i(e,t){return("undefined"==typeof e?"undefined":d(e))===("undefined"==typeof t?"undefined":d(t))&&e.constructor===t.constructor&&(e.constructor!==Object?e===t:u([r(e),r(t)]).every(function(e){}))}function o(e){return void 0!==e&&null!==e}function f(e,t){var n,r,u;return n=y(arguments).slice(1),r=1===n.length?n[0]:n,u=e.apply(this,n),u||r}function c(e,t){function n(e,n){return n!==r&&("function"==typeof n?f(t,n):"object"===("undefined"==typeof n?"undefined":d(n))?c(n,t):void 0)}var r={};for(var u in e)r[u]=n(u,e[u]);return r}function a(e){var r,u;return r=c(e,n),r=c(r,t),u=c(e,t),u.not=r,u}function l(e,t){var n=function(e,t){return f(t,e)},r=function(r){return e.reduce(n,t||r)};return t?r(t):r}var s="2.2.3",d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){return Array.prototype.slice.call(e,0)},v=(t(function(e,t){return e.hasOwnProperty(t)}),{element:function(e){return e.nodeType===document.ELEMENT_NODE},fragment:function(e){return e.nodeType===document.DOCUMENT_FRAGMENT_NODE},text:function(e){return e.nodeType===document.TEXT_NODE},equal:i,existant:o});v=a(v);var p=v,k={array:y,pair:r,method:t,flatten:u,decomposed:l,attempt:f},g=function(){function e(t){m(this,e),this.setElement(t)}return h(e,[{key:"setElement",value:function(t){return this.element=e.asElement(t),this}},{key:"getElement",value:function(){return this.element}}],[{key:"fromQuerySelector",value:function(e){if("string"==typeof e)return document.querySelector(e)}},{key:"fromSizzle",value:function(e){if("function"==typeof e.get)return e.get(0)}},{key:"fromTemplate",value:function(e){if(p.element(e))return e.content}},{key:"fromFragment",value:function(e){if(p.fragment(e)&&e.hasChildNodes())return e.firstElementChild}},{key:"asElement",value:function(t){var n=[e.fromQuerySelector,e.fromSizzle,e.fromTemplate,e.fromFragment],r=k.decomposed(n,t);if(r&&p.element(r))return r}}]),e}(),b=function(){function e(t){m(this,e),this.setMutator(t)}return h(e,[{key:"getChildren",value:function(e){return"undefined"!=typeof e.content&&(e=e.content),k.array(e.childNodes)}},{key:"allChildren",value:function(e){var t=function(e){return p.element(e)?this.allChildren(e):e}.bind(this),n=this.getChildren(e).map(t);return k.flatten(n)}},{key:"getAttributes",value:function(e){return k.array(e.attributes)}},{key:"setChildren",value:function(e){var t=(this.setAttributes(e),this.getChildren(e));for(var n in t){var r,u=t[n];p.text(u)&&u.textContent.trim().length>0&&(r=this.mutator.apply(u,[u.textContent,arguments[1],t])),p.element(u)&&this.setChildren(u),p.existant(r)&&(u.textContent=r)}return e}},{key:"setAttributes",value:function(e){var t=this.getAttributes(e);for(var n in t){var r,u,i,o=t[n];u=o.name,i=o.value,e.hasAttribute(u)&&i.trim().length>0&&(r=this.mutator.apply(e,[o.value,o.name,t])),p.existant(r)&&e.setAttribute(o.name,r)}return t}},{key:"infect",value:function(e){return e=this.setChildren(e),this.infection=e,e}},{key:"addChildren",value:function(e){var t,n;t=this.getChildren(this.infection),n=this.getChildren(e);var r=function(r){var u=t[r];n.every(function(e){return p.not.equal(u,e)})&&e.appendChild(u)};for(var u in t)r(u);return e}},{key:"setMutator",value:function(e){this.mutator=e}}]),e}(),E=function(e,t){var n=/[.{}]/g,r=function(e){return e},u=function(e,t){return e[t]};return t.split(n).filter(r).reduce(u,e)},C=function(e,t){var n=/\{([^}]+)\}/g,r=function(e,n){return E(t,n)};return e.trim().replace(n,r)},x=function(){function e(t){m(this,e),this.pipeline=[],this.mutators=[],this.sources=[],this.outputs=[],this.setElement(t)}return h(e,[{key:"getElement",value:function(e){return"undefined"!=typeof g&&(e=g.asElement(e)),e}},{key:"setElement",value:function(e){return e=this.getElement(e),this.element=e,e}},{key:"fromEventSource",value:function(e){}},{key:"fromPromise",value:function(e){}},{key:"fromEvent",value:function(e){}},{key:"fromData",value:function(e){var t;return t={},t.source=e,t.passed=[],this.sources.push(t),t}},{key:"fromHandler",value:function(e){}},{key:"fromMutator",value:function(e){}},{key:"fromElement",value:function(e){this.outputs.push(e)}},{key:"route",value:function(e){var t;return e.constructor===Object?this.fromData(e):(t=this.getElement(e))?this.fromElement(t):void this.pipeline.push(e)}},{key:"render",value:function(){var e=this,t=function(e,t){if(e.passed.indexOf(t)!==-1)return e;var n=t.call(e,e.source);return e.passed.push(t),void 0!==n&&null!==n&&(e.source=n),e}.bind(this),n=(function(e,t){var n=t(e);return void 0!==n&&null!==n?n:e}.bind(this),!0),r=!1,u=void 0;try{for(var i,o=function(){var n=i.value,r=e.pipeline.reduce(t,n),u=e.element.cloneNode(!0),o=function(e){return C(e,r.source)},f=new b(o);void 0===r.compiled?(f.infect(u),r.compiled=f.infection):f.infection=r.compiled,e.outputs.forEach(f.addChildren.bind(f))},f=this.sources[Symbol.iterator]();!(n=(i=f.next()).done);n=!0)o()}catch(e){r=!0,u=e}finally{try{!n&&f.return&&f.return()}finally{if(r)throw u}}}},{key:"pipe",value:function(e){return this.route(e),this.render(),this}}],[{key:"version",get:function(){return s}}]),e}();return x});
//# sourceMappingURL=bin/index.min.js.map