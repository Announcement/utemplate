!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.Template=factory()}(this,function(){"use strict";function combine(array,values){var index;for(array=array.concat([]);(index=array.indexOf(void 0))!==-1&&values.length>0;)array[index]=values.shift();return array.concat(values)}function curry$(method){function transform(params){var context;return function(){var args=combine(params,array$(arguments));return context=context||this,args.length<method.length||args.some(function(it){return void 0===it})?transform(args):method.apply(context,args)}}return method.length<=1?method:transform([])}function negated$(it){return function(){return!it.apply(this,arguments)}}function pair(object){return Object.keys(object).map(function(key){return{key:key,value:object[key]}})}function flatten(array){var isArray,toArray,fromArray;for(isArray=function(it){return it.constructor===Array},toArray=function(it){return isArray(it)?it:[it]},fromArray=function(a,b){return a.concat(b)};array.some(isArray);)array=array.map(toArray).reduce(fromArray);return array}function equals(reference,object){return(void 0===reference?"undefined":_typeof(reference))===(void 0===object?"undefined":_typeof(object))&&reference.constructor===object.constructor&&(reference.constructor!==Object?reference===object:flatten([pair(reference),pair(object)]).every(function(item){}))}function exists(it){return void 0!==it&&null!==it}function attempt(mutation,subject){var parameters,alternative,response;return parameters=array$(arguments).slice(1),alternative=1===parameters.length?parameters[0]:parameters,response=mutation.apply(this,parameters),response||alternative}function inject(it,transform){function cycle(key,value){return value!==copy&&("function"==typeof value?attempt(transform,value):"object"===(void 0===value?"undefined":_typeof(value))?inject(value,transform):void 0)}var copy={};for(var key in it)copy[key]=cycle(key,it[key]);return copy}function prepare(it){var not,tmp;return not=inject(it,negated$),not=inject(not,curry$),tmp=inject(it,curry$),tmp.not=not,tmp}function decompose(array,initial){var composer=function(previous,current){return attempt(current,previous)},reducer=function(it){return array.reduce(composer,initial||it)};return initial?reducer(initial):reducer}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),array$=function(it){return Array.prototype.slice.call(it,0)},is$=(curry$(function(object,property){return object.hasOwnProperty(property)}),{element:function(object){return object.nodeType===document.ELEMENT_NODE},fragment:function(object){return object.nodeType===document.DOCUMENT_FRAGMENT_NODE},text:function(object){return object.nodeType===document.TEXT_NODE},equal:equals,existant:exists});is$=prepare(is$);var is=is$,as={array:array$,pair:pair,method:curry$,flatten:flatten,decomposed:decompose,attempt:attempt},Alchemist=function(){function Alchemist(element){classCallCheck(this,Alchemist),this.setElement(element)}return createClass(Alchemist,[{key:"setElement",value:function(element){return this.element=Alchemist.asElement(element),this}},{key:"getElement",value:function(){return this.element}}],[{key:"fromQuerySelector",value:function(element){if("string"==typeof element)return document.querySelector(element)}},{key:"fromSizzle",value:function(element){if("function"==typeof element.get)return element.get(0)}},{key:"fromTemplate",value:function(element){if(is.element(element))return element.content}},{key:"fromFragment",value:function(element){if(is.fragment(element)&&element.hasChildNodes())return element.firstElementChild}},{key:"asElement",value:function(element){var waterfall=[Alchemist.fromQuerySelector,Alchemist.fromSizzle,Alchemist.fromFragment],result=as.decomposed(waterfall,element);if(result&&is.element(result))return result}}]),Alchemist}();!function(){function Parasite(mutator){classCallCheck(this,Parasite),this.setMutator(mutator)}return createClass(Parasite,[{key:"getChildren",value:function(element){return void 0!==element.content&&(element=element.content),as.array(element.childNodes)}},{key:"allChildren",value:function(element){var map=function(child){return is.element(child)?this.allChildren(child):child}.bind(this),children=this.getChildren(element).map(map);return as.flatten(children)}},{key:"getAttributes",value:function(element){return as.array(element.attributes)}},{key:"setChildren",value:function(element){var children=(this.setAttributes(element),this.getChildren(element));for(var key in children){var result,child=children[key];is.text(child)&&child.textContent.trim().length>0&&(result=this.mutator.apply(child,[child.textContent,arguments[1],children])),is.element(child)&&this.setChildren(child),is.existant(result)&&(child.textContent=result)}return element}},{key:"setAttributes",value:function(element){var attributes=this.getAttributes(element);for(var index in attributes){var result,name,value,attribute=attributes[index];name=attribute.name,value=attribute.value,element.hasAttribute(name)&&value.trim().length>0&&(result=this.mutator.apply(element,[attribute.value,attribute.name,attributes])),is.existant(result)&&element.setAttribute(attribute.name,result)}return attributes}},{key:"infect",value:function(element){return element=this.setChildren(element),this.infection=element,element}},{key:"addChildren",value:function(element){var children,sibilings;children=this.getChildren(this.infection),sibilings=this.getChildren(element);var _loop=function(index){var child=children[index];sibilings.every(function(it){return is.not.equal(child,it)})&&element.appendChild(child)};for(var index in children)_loop(index);return element}},{key:"setMutator",value:function(mutator){this.mutator=mutator}}]),Parasite}();return function(){function Template(element){classCallCheck(this,Template),this.pipeline=[],this.mutators=[],this.sources=[],this.outputs=[],this.setElement(element)}return createClass(Template,[{key:"getElement",value:function(element){return void 0!==Alchemist&&(element=Alchemist.asElement(element)),element}},{key:"setElement",value:function(element){return element=this.getElement(element),this.element=element,element}},{key:"fromEventSource",value:function(source){}},{key:"fromPromise",value:function(action){}},{key:"fromEvent",value:function(action){}},{key:"fromData",value:function(data){var tracker;return tracker={},tracker.source=data,tracker.passed=[],this.sources.push(tracker),tracker}},{key:"fromHandler",value:function(handler){}},{key:"fromMutator",value:function(mutator){}},{key:"fromElement",value:function(element){this.outputs.push(element)}},{key:"route",value:function(flow){var that;return flow.constructor===Object?this.fromData(flow):(that=this.getElement(flow))?this.fromElement(that):void this.pipeline.push(flow)}},{key:"prepare",value:function(packet){}},{key:"render",value:function(){}},{key:"pipe",value:function(flow){return this.route(flow),this.render(),this}}],[{key:"version",get:function(){return"2.2.5"}}]),Template}()});
//# sourceMappingURL=bin/index.min.js.map