var Template,Alchemist,Nudist;Nudist=function(e){"use strict";function t(e){this.expose(e)}var n,i;return i=t,n=t.prototype,i.className="Nudist",n.expose=function(e,t){"function"==typeof define&&define(e.name.toLowerCase(),[],function(){return e}),"undefined"!=typeof module&&(module.exports=e),"undefined"!=typeof window&&(window[e.name]=e),"undefined"!=typeof global&&(global[e.name]=e),"undefined"!=typeof t&&(t[e.name]=e)},n.toString=function(){return"[object "+this.name+"]"},t}(this),Alchemist=function(e){"use strict";function t(e){this.setElement(e)}var n,i,r;return i=t,n=t.prototype,i.className="Alchemist",r={},r.invalidElement="Invalid or unknown element was specified.",r.invalidElement=new Error(r.invalidElement),n.asElement=function(e){return e.constructor===String&&(e=document.querySelector(e)),"undefined"!=typeof jQuery&&e.constructor===jQuery&&(e=e.get(0)),e instanceof Element&&"TEMPLATE"===e.tagName&&(e=e.content),e instanceof DocumentFragment&&e.hasChildNodes()&&(e=e.firstElementChild),e instanceof Element?e:r.invalidElement},n.setElement=function(e){return this.element=this.asElement(e),this.element},n.getElement=function(){return this.element},n.toString=function(){return"[object "+this.name+"]"},t}(),Template=function(e){"use strict";function t(e,t){var n,i,r;return n=/[.{}]/g,i=function(e){return e},r=function(e,t){return e[t]},t.split(n).filter(i).reduce(r,e)}function n(e){return!!e}function i(e){this.initialize(),this.setElement(e)}var r,o;return o=i,r=i.prototype,o.className="Template",r.setElement=function(e){return"undefined"!=typeof Alchemist&&(e=Alchemist.prototype.asElement(e)),this.element=e,e},r.compile=function(e,n){var i,r;return i=/\{([^}]+)\}/g,r=function(e,i){return t(n,i)},e=e.trim(),e=e.replace(i,r)},r.crawl=function(e,t){var n,i,r,o;return r=this,o=arguments,n=function(e){var n,i;return i=function(n){var i;e.hasAttribute(n.name)&&(i=r.compile(n.value,t),e.setAttribute(n.name,i))},n=[].slice.call(e.attributes,0),n.map(i)},i=function(){var n,i,o,s,u=document.TEXT_NODE,c=document.ELEMENT_NODE;return n=function(t,n,i){e.childNodes[n]=r.crawl(t,i)},i=function(t,n,i){var o;o=r.compile(t.textContent,i),e.childNodes[n].textContent=o},s=function(e,r){e.nodeType===u&&i(e,r,t),e.nodeType===c&&n(e,r,t)},o=[].slice.call(e.childNodes,0),o.map(s)},e.hasAttributes()&&n(e,t),e.hasChildNodes()&&i(e,t),e},r.prepare=function(e){var t,i,r,o,s;return n(e)?(t=this.element.cloneNode(!0),o=this.crawl(t,e),i=t.innerHTML,r=/\{([^}]+)\}/g,this.appendSources(e),s=btoa(function(){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=escape(e[n]));return JSON.stringify(e)}()),t.template=this,t.rendered=s,t):void 0},r.render=function(){return this.sources.map(function(e){this.pipeline.reduce(function(e,t){return"function"==typeof t?t(e):"undefined"!=typeof t.childNodes?function(e,n){for(var i=0;i<n.length;i++)if("undefined"!=typeof n[i].rendered&&n[i].rendered===e.rendered)return t.replaceChild(e,n[i]);return t.appendChild(e),e}.call(this,this.prepare(e),t.childNodes):t(e)}.bind(this),e)}.bind(this)),this.sources=[],this},r.appendSources=function(e){return e.constructor===Array?e.map(this.appendSources):(this.sources.push(e),e)},r.pipe=function(e){var t;switch(t=this.pipeline.indexOf(e),typeof e){case"undefined":return this;case"function":break;case"object":return this.appendSources(e),this;default:e=i.prototype.setElement(e)}return-1!==t?this.pipeline.splice(t,1,e):this.pipeline.push(e),this.render(),this},r.initialize=function(){this.pipeline=[],this.sources=[]},r.toString=function(){return"[object "+this.name+"]"},i}(),new Nudist(Template);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0ZW1wbGF0ZS5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZSIsIkFsY2hlbWlzdCIsIk51ZGlzdCIsInNjb3BlIiwicHJvZ3JhbSIsInRoaXMiLCJleHBvc2UiLCJwcm90b3R5cGUiLCJjb25zdHJ1Y3RvciIsImNsYXNzTmFtZSIsImlucHV0IiwiZGVmaW5lIiwibmFtZSIsInRvTG93ZXJDYXNlIiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyIsImdsb2JhbCIsInRvU3RyaW5nIiwiZWxlbWVudCIsInNldEVsZW1lbnQiLCJlcnJvciIsImludmFsaWRFbGVtZW50IiwiRXJyb3IiLCJhc0VsZW1lbnQiLCJTdHJpbmciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJqUXVlcnkiLCJnZXQiLCJFbGVtZW50IiwidGFnTmFtZSIsImNvbnRlbnQiLCJEb2N1bWVudEZyYWdtZW50IiwiaGFzQ2hpbGROb2RlcyIsImZpcnN0RWxlbWVudENoaWxkIiwiZ2V0RWxlbWVudCIsInF1ZXJ5Iiwib2JqZWN0IiwicHJvcGVydHkiLCJyZWdleCIsImZpbHRlciIsInJlZHVjZSIsInNvdXJjZSIsImtleSIsInNwbGl0IiwidmFsaWRhdGUiLCJkYXRhIiwiaW5pdGlhbGl6ZSIsImNvbXBpbGUiLCJ2YWx1ZSIsInJlcGxhY2VtZW50Iiwib3JpZ2luYWwiLCJ0cmltIiwicmVwbGFjZSIsImNyYXdsIiwiZG9BdHRyaWJ1dGVzIiwiZG9DaGlsZHJlbiIsInNlbGYiLCJhcmdzIiwiYXJndW1lbnRzIiwiYXR0cmlidXRlcyIsImxvb3AiLCJhdHRyaWJ1dGUiLCJjb21waWxlZCIsImhhc0F0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInNsaWNlIiwiY2FsbCIsIm1hcCIsInNldFRleHROb2RlIiwiY2hpbGRyZW4iLCJ0ZXh0Tm9kZSIsIlRFWFRfTk9ERSIsImVsZW1lbnROb2RlIiwiRUxFTUVOVF9OT0RFIiwiY2hpbGQiLCJpIiwiY2hpbGROb2RlcyIsInRleHRDb250ZW50Iiwibm9kZVR5cGUiLCJoYXNBdHRyaWJ1dGVzIiwicHJlcGFyZSIsImh0bWwiLCJwcm9wZXJ0aWVzIiwicmVzb2x2ZSIsImNsb25lTm9kZSIsImlubmVySFRNTCIsImFwcGVuZFNvdXJjZXMiLCJidG9hIiwiJHJlZiIsImhhc093blByb3BlcnR5IiwiZXNjYXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsInRlbXBsYXRlIiwicmVuZGVyZWQiLCJyZW5kZXIiLCJzb3VyY2VzIiwicGlwZWxpbmUiLCJwcmV2aW91cyIsImN1cnJlbnQiLCJwcmVwYXJlZCIsImxlbmd0aCIsInJlcGxhY2VDaGlsZCIsImFwcGVuZENoaWxkIiwiYmluZCIsIkFycmF5IiwicHVzaCIsInBpcGUiLCJmbG93IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxVQUNBQyxVQUNBQyxNQUVBQSxRQUFBLFNBQUFDLEdBQ0EsWUFvQ0EsU0FBQUQsR0FBQUUsR0FDQUMsS0FBQUMsT0FBQUYsR0FuQ0EsR0FBQUcsR0FDQUMsQ0FxQ0EsT0FuQ0FBLEdBQUFOLEVBQ0FLLEVBQUFMLEVBQUFLLFVBRUFDLEVBQUFDLFVBQUEsU0FFQUYsRUFBQUQsT0FBQSxTQUFBSSxFQUFBUCxHQUNBLGtCQUFBUSxTQUNBQSxPQUFBRCxFQUFBRSxLQUFBQyxpQkFBQSxXQUFBLE1BQUFILEtBR0EsbUJBQUFJLFVBQ0FBLE9BQUFDLFFBQUFMLEdBR0EsbUJBQUFNLFVBQ0FBLE9BQUFOLEVBQUFFLE1BQUFGLEdBR0EsbUJBQUFPLFVBQ0FBLE9BQUFQLEVBQUFFLE1BQUFGLEdBR0EsbUJBQUFQLEtBQ0FBLEVBQUFPLEVBQUFFLE1BQUFGLElBSUFILEVBQUFXLFNBQUEsV0FDQSxNQUFBLFdBQUFiLEtBQUFPLEtBQUEsS0FPQVYsR0FDQUcsTUFFQUosVUFBQSxTQUFBa0IsR0FDQSxZQTJEQSxTQUFBbEIsR0FBQWtCLEdBQ0FkLEtBQUFlLFdBQUFELEdBMURBLEdBQUFaLEdBQ0FDLEVBRUFhLENBMERBLE9BeERBYixHQUFBUCxFQUNBTSxF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LFFBQUFrQixHQUFBQyxFQUFBdkIsWUFHQXVCLEVBQUFELElBQ0FNLEtBQUFyRyxNQUFBc0MsSUFDQStELEtBQUFyRyxPQUNBQSxLQUFBNkYsV0FDQTdGLE1BR0FFLEVBQUFpRixjQUFBLFNBQUFsRCxHQUNBLE1BQUFBLEdBQUE5QixjQUFBbUcsTUFDQXJFLEVBQUErQixJQUFBaEUsS0FBQW1GLGdCQUdBbkYsS0FBQTZGLFFBQUFVLEtBQUF0RSxHQUVBQSxJQUdBL0IsRUFBQXNHLEtBQUEsU0FBQUMsR0FFQSxHQUFBQyxFQUlBLFFBRkFBLEVBQUExRyxLQUFBOEYsU0FBQWEsUUFBQUYsU0FFQUEsSUFDQSxJQUFBLFlBQ0EsTUFBQXpHLEtBRUEsS0FBQSxXQUNBLEtBRUEsS0FBQSxTQUVBLE1BREFBLE1BQUFtRixjQUFBc0IsR0FDQXpHLElBRUEsU0FDQXlHLEVBQUE5RyxFQUFBTyxVQUFBYSxXQUFBMEYsR0FXQSxNQVJBLEtBQUFDLEVBQ0ExRyxLQUFBOEYsU0FBQWMsT0FBQUYsRUFBQSxFQUFBRCxHQUVBekcsS0FBQThGLFNBQUFTLEtBQUFFLEdBR0F6RyxLQUFBNEYsU0FFQTVGLE1BR0FFLEVBQUF5QyxXQUFBLFdBQ0EzQyxLQUFBOEYsWUFDQTlGLEtBQUE2RixZQUdBM0YsRUFBQVcsU0FBQSxXQUNBLE1BQUEsV0FBQWIsS0FBQU8sS0FBQSxLQVFBWixLQUdBLEdBQUFFLFFBQUFGIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBUZW1wbGF0ZTtcclxudmFyIEFsY2hlbWlzdDtcclxudmFyIE51ZGlzdDtcclxuXHJcbk51ZGlzdCA9IChmdW5jdGlvbihzY29wZSkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgdmFyIHByb3RvdHlwZTtcclxuICB2YXIgY29uc3RydWN0b3I7XHJcblxyXG4gIGNvbnN0cnVjdG9yID0gTnVkaXN0O1xyXG4gIHByb3RvdHlwZSA9IE51ZGlzdC5wcm90b3R5cGU7XHJcblxyXG4gIGNvbnN0cnVjdG9yLmNsYXNzTmFtZSA9ICdOdWRpc3QnO1xyXG5cclxuICBwcm90b3R5cGUuZXhwb3NlID0gZnVuY3Rpb24gZXhwb3NlKGlucHV0LCBzY29wZSkge1xyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgZGVmaW5lKGlucHV0Lm5hbWUudG9Mb3dlckNhc2UoKSwgW10sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlucHV0OyB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gaW5wdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHdpbmRvd1tpbnB1dC5uYW1lXSA9IGlucHV0O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBnbG9iYWxbaW5wdXQubmFtZV0gPSBpbnB1dDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHNjb3BlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBzY29wZVtpbnB1dC5uYW1lXSA9IGlucHV0O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuICdbb2JqZWN0ICcgKyB0aGlzLm5hbWUgKyAnXSdcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBOdWRpc3QocHJvZ3JhbSkge1xyXG4gICAgdGhpcy5leHBvc2UocHJvZ3JhbSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gTnVkaXN0O1xyXG59KHRoaXMpKTtcclxuXHJcbkFsY2hlbWlzdCA9IChmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICB2YXIgcHJvdG90eXBlO1xyXG4gIHZhciBjb25zdHJ1Y3RvcjtcclxuXHJcbiAgdmFyIGVycm9yO1xyXG5cclxuICBjb25zdHJ1Y3RvciA9IEFsY2hlbWlzdDtcclxuICBwcm90b3R5cGUgPSBBbGNoZW1pc3QucHJvdG90eXBlO1xyXG5cclxuICBjb25zdHJ1Y3Rvci5jbGFzc05hbWUgPSBcIkFsY2hlbWlzdFwiO1xyXG5cclxuICBlcnJvciA9IHt9O1xyXG4gIGVycm9yLmludmFsaWRFbGVtZW50ID0gXCJJbnZhbGlkIG9yIHVua25vd24gZWxlbWVudCB3YXMgc3BlY2lmaWVkLlwiO1xyXG4gIGVycm9yLmludmFsaWRFbGVtZW50ID0gbmV3IEVycm9yKGVycm9yLmludmFsaWRFbGVtZW50KTtcclxuXHJcbiAgcHJvdG90eXBlLmFzRWxlbWVudCA9IGZ1bmN0aW9uIGFzRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICAvLyBmaW5kIHNwZWNpZmllZCBlbGVtZW50XHJcbiAgICBpZiAoZWxlbWVudC5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKSB7XHJcbiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGl0J3MgYSBqUXVlcnkgbm9kZVxyXG4gICAgaWYgKHR5cGVvZiBqUXVlcnkgIT09ICd1bmRlZmluZWQnICYmIGVsZW1lbnQuY29uc3RydWN0b3IgPT09IGpRdWVyeSkge1xyXG4gICAgICBlbGVtZW50ID0gZWxlbWVudC5nZXQoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaHRtbDUgdGVtcGxhdGUgY29udGVudFxyXG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIGVsZW1lbnQudGFnTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xyXG4gICAgICBlbGVtZW50ID0gZWxlbWVudC5jb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRlZnJhZ21lbnRcclxuICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCAmJiBlbGVtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xyXG4gICAgICBlbGVtZW50ID0gZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBlbGVtZW50IGlzIGFscmVhZHkgcHJvdmlkZWRcclxuICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xyXG4gICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXJyb3IuaW52YWxpZEVsZW1lbnQ7XHJcbiAgfTtcclxuXHJcbiAgcHJvdG90eXBlLnNldEVsZW1lbnQgPSBmdW5jdGlvbiBzZXRFbGVtZW50KGVsZW1lbnQpIHtcclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuYXNFbGVtZW50KGVsZW1lbnQpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgfTtcclxuXHJcbiAgcHJvdG90eXBlLmdldEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRFbGVtZW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICB9O1xyXG5cclxuICBwcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiAnW29iamVjdCAnICsgdGhpcy5uYW1lICsgJ10nO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIEFsY2hlbWlzdChlbGVtZW50KSB7XHJcbiAgICB0aGlzLnNldEVsZW1lbnQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gQWxjaGVtaXN0O1xyXG59KCkpO1xyXG5cclxuVGVtcGxhdGUgPSAoZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgdmFyIHByb3RvdHlwZTtcclxuICB2YXIgY29uc3RydWN0b3I7XHJcblxyXG4gIGNvbnN0cnVjdG9yID0gVGVtcGxhdGU7XHJcbiAgcHJvdG90eXBlID0gVGVtcGxhdGUucHJvdG90eXBlO1xyXG5cclxuICBjb25zdHJ1Y3Rvci5jbGFzc05hbWUgPSBcIlRlbXBsYXRlXCI7XHJcblxyXG4gIGZ1bmN0aW9uIHF1ZXJ5KG9iamVjdCwgcHJvcGVydHkpIHtcclxuICAgIHZhciByZWdleDtcclxuICAgIHZhciBmaWx0ZXI7XHJcbiAgICB2YXIgcmVkdWNlO1xyXG5cclxuICAgIHJlZ2V4ID0gL1sue31dL2c7XHJcbiAgICBmaWx0ZXIgPSBmdW5jdGlvbiBmaWx0ZXIoc291cmNlKSB7IHJldHVybiBzb3VyY2U7IH07XHJcbiAgICByZWR1Y2UgPSBmdW5jdGlvbiByZWR1Y2Uoc291cmNlLCBrZXkpIHsgcmV0dXJuIHNvdXJjZVtrZXldOyB9O1xyXG5cclxuICAgIHJldHVybiBwcm9wZXJ0eVxyXG4gICAgLnNwbGl0KHJlZ2V4KVxyXG4gICAgLmZpbHRlcihmaWx0ZXIpXHJcbiAgICAucmVkdWNlKHJlZHVjZSwgb2JqZWN0KTtcclxuICB9XHJcblxyXG4gIHByb3RvdHlwZS5zZXRFbGVtZW50ID0gZnVuY3Rpb24gc2V0RWxlbWVudChlbGVtZW50KSB7XHJcbiAgICBpZiAodHlwZW9mIEFsY2hlbWlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgZWxlbWVudCA9IEFsY2hlbWlzdC5wcm90b3R5cGUuYXNFbGVtZW50KGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcblxyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgfTtcclxuXHJcbiAgcHJvdG90eXBlLmNvbXBpbGUgPSBmdW5jdGlvbiBjb21waWxlKHZhbHVlLCBkYXRhKSB7XHJcbiAgICB2YXIgcmVnZXg7XHJcbiAgICB2YXIgcmVwbGFjZW1lbnQ7XHJcblxyXG4gICAgcmVnZXggPSAvXFx7KFtefV0rKVxcfS9nO1xyXG5cclxuICAgIHJlcGxhY2VtZW50ID0gZnVuY3Rpb24gcmVwbGFjZW1lbnQob3JpZ2luYWwsIHByb3BlcnR5KSB7XHJcbiAgICAgIHJldHVybiBxdWVyeShkYXRhLCBwcm9wZXJ0eSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xyXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4LCByZXBsYWNlbWVudCk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH07XHJcblxyXG4gIHByb3RvdHlwZS5jcmF3bCA9IGZ1bmN0aW9uIGNyYXdsKGVsZW1lbnQsIGRhdGEpIHtcclxuICAgIHZhciBkb0F0dHJpYnV0ZXM7XHJcbiAgICB2YXIgZG9DaGlsZHJlbjtcclxuXHJcbiAgICB2YXIgc2VsZiwgYXJncztcclxuXHJcbiAgICBzZWxmID0gdGhpcztcclxuICAgIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgZG9BdHRyaWJ1dGVzID0gZnVuY3Rpb24gZG9BdHRyaWJ1dGVzKGVsZW1lbnQpIHtcclxuICAgICAgdmFyIGF0dHJpYnV0ZXM7XHJcbiAgICAgIHZhciBhdHRyaWJ1dGU7XHJcblxyXG4gICAgICB2YXIgbG9vcDtcclxuXHJcbiAgICAgIGxvb3AgPSBmdW5jdGlvbiBsb29wKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHZhciBjb21waWxlZDtcclxuXHJcbiAgICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lKSkge1xyXG4gICAgICAgICAgY29tcGlsZWQgPSBzZWxmLmNvbXBpbGUoYXR0cmlidXRlLnZhbHVlLCBkYXRhKTtcclxuICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lLCBjb21waWxlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXR0cmlidXRlcyA9IChbXSkuc2xpY2UuY2FsbChlbGVtZW50LmF0dHJpYnV0ZXMsIDApO1xyXG5cclxuICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMubWFwKGxvb3ApO1xyXG4gICAgfTtcclxuXHJcbiAgICBkb0NoaWxkcmVuID0gZnVuY3Rpb24gZG9DaGlsZHJlbigpIHtcclxuICAgICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuVEVYVF9OT0RFO1xyXG4gICAgICB2YXIgZWxlbWVudE5vZGUgPSBkb2N1bWVudC5FTEVNRU5UX05PREU7XHJcblxyXG4gICAgICB2YXIgc2V0RWxlbWVudDtcclxuICAgICAgdmFyIHNldFRleHROb2RlO1xyXG5cclxuICAgICAgdmFyIGNoaWxkcmVuO1xyXG4gICAgICB2YXIgY2hpbGQ7XHJcblxyXG4gICAgICB2YXIgbG9vcDtcclxuICAgICAgdmFyIGZpeEVsZW1lbnQ7XHJcbiAgICAgIHZhciBmaXhUZXh0Tm9kZTtcclxuXHJcbiAgICAgIHNldEVsZW1lbnQgPSBmdW5jdGlvbiBzZXRFbGVtZW50KGNoaWxkLCBpLCBkYXRhKSB7XHJcbiAgICAgICAgZWxlbWVudC5jaGlsZE5vZGVzW2ldID0gc2VsZi5jcmF3bChjaGlsZCwgZGF0YSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzZXRUZXh0Tm9kZSA9IGZ1bmN0aW9uIHNldFRleHROb2RlKGNoaWxkLCBpLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIGNvbXBpbGVkO1xyXG5cclxuICAgICAgICBjb21waWxlZCA9IHNlbGYuY29tcGlsZShjaGlsZC50ZXh0Q29udGVudCwgZGF0YSk7XHJcblxyXG4gICAgICAgIGVsZW1lbnQuY2hpbGROb2Rlc1tpXS50ZXh0Q29udGVudCA9IGNvbXBpbGVkO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgbG9vcCA9IGZ1bmN0aW9uIGxvb3AoY2hpbGQsIGkpIHtcclxuICAgICAgICBpZihjaGlsZC5ub2RlVHlwZSA9PT0gdGV4dE5vZGUpIHtcclxuICAgICAgICAgIHNldFRleHROb2RlKGNoaWxkLCBpLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09PSBlbGVtZW50Tm9kZSkge1xyXG4gICAgICAgICAgc2V0RWxlbWVudChjaGlsZCwgaSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY2hpbGRyZW4gPSAoW10pLnNsaWNlLmNhbGwoZWxlbWVudC5jaGlsZE5vZGVzLCAwKTtcclxuXHJcbiAgICAgIHJldHVybiBjaGlsZHJlbi5tYXAobG9vcCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZXMoKSkge1xyXG4gICAgICBkb0F0dHJpYnV0ZXMoZWxlbWVudCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVsZW1lbnQuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgIGRvQ2hpbGRyZW4oZWxlbWVudCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gaGFzUHJvcGVydGllcyhvYmplY3QsIGFycmF5KSB7XHJcbiAgICB2YXIgYXJlTWlzc2luZztcclxuXHJcbiAgICBhcmVNaXNzaW5nID0gZnVuY3Rpb24gYXJlTWlzc2luZyhwcm9wZXJ0eSkge1xyXG4gICAgICByZXR1cm4gIW9iamVjdC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBhcnJheS5zb21lKGFyZU1pc3NpbmcpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdmFsaWRhdGUoZGF0YSkge1xyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHJvdG90eXBlLnByZXBhcmUgPSBmdW5jdGlvbiBwcmVwYXJlKGRhdGEpIHtcclxuICAgIHZhciBlbGVtZW50O1xyXG4gICAgdmFyIGh0bWw7XHJcbiAgICB2YXIgcHJvcGVydGllcztcclxuICAgIHZhciByZXNvbHZlO1xyXG4gICAgdmFyIHNvdXJjZTtcclxuXHJcbiAgICBpZiAodmFsaWRhdGUoZGF0YSkpIHtcclxuXHJcbiAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICByZXNvbHZlID0gdGhpcy5jcmF3bChlbGVtZW50LCBkYXRhKTtcclxuXHJcbiAgICAgIGh0bWwgPSBlbGVtZW50LmlubmVySFRNTDtcclxuXHJcbiAgICAgIHByb3BlcnRpZXMgPSAvXFx7KFtefV0rKVxcfS9nO1xyXG5cclxuICAgICAgdGhpcy5hcHBlbmRTb3VyY2VzKGRhdGEpO1xyXG5cclxuICAgICAgc291cmNlID0gYnRvYShmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgJHJlZiA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoKGtleSkpKSB7XHJcbiAgICAgICAgICAgICRyZWZba2V5XSA9IGVzY2FwZShkYXRhW2tleV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG4gICAgICB9KCkpO1xyXG5cclxuICAgICAgZWxlbWVudC50ZW1wbGF0ZSA9IHRoaXM7XHJcbiAgICAgIGVsZW1lbnQucmVuZGVyZWQgPSBzb3VyY2U7XHJcblxyXG4gICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zb3VyY2VzLm1hcChmdW5jdGlvbihzb3VyY2UpIHtcclxuICAgICAgdGhpcy5waXBlbGluZS5yZWR1Y2UoZnVuY3Rpb24ocHJldmlvdXMsIGN1cnJlbnQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHJldHVybiBjdXJyZW50KHByZXZpb3VzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjdXJyZW50LmNoaWxkTm9kZXMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICByZXR1cm4gKGZ1bmN0aW9uKHByZXBhcmVkLCBjaGlsZHJlbikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZHJlbltpXS5yZW5kZXJlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5yZW5kZXJlZCA9PT0gcHJlcGFyZWQucmVuZGVyZWQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQucmVwbGFjZUNoaWxkKHByZXBhcmVkLCBjaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1cnJlbnQuYXBwZW5kQ2hpbGQocHJlcGFyZWQpO1xuICAgICAgICAgICAgcmV0dXJuIHByZXBhcmVkO1xyXG4gICAgICAgICAgfS5jYWxsKHRoaXMsIHRoaXMucHJlcGFyZShwcmV2aW91cyksIGN1cnJlbnQuY2hpbGROb2RlcykpO1xyXG4gICAgICAgICAgcmV0dXJuIHByZXZpb3VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3VycmVudChwcmV2aW91cyk7XHJcbiAgICAgIH0uYmluZCh0aGlzKSwgc291cmNlKTtcclxuICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLnNvdXJjZXMgPSBbXTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIHByb3RvdHlwZS5hcHBlbmRTb3VyY2VzID0gZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICBpZiAob2JqZWN0LmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xyXG4gICAgICByZXR1cm4gb2JqZWN0Lm1hcCh0aGlzLmFwcGVuZFNvdXJjZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc291cmNlcy5wdXNoKG9iamVjdCk7XG5cbiAgICByZXR1cm4gb2JqZWN0O1xyXG4gIH07XHJcblxyXG4gIHByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gcGlwZShmbG93KSB7XHJcbiAgICAvLyByZXNvbHZlIGR1cGxpY2F0ZXNcclxuICAgIHZhciBpbmRleDtcclxuXHJcbiAgICBpbmRleCA9IHRoaXMucGlwZWxpbmUuaW5kZXhPZihmbG93KTtcclxuXHJcbiAgICBzd2l0Y2godHlwZW9mIGZsb3cpIHtcclxuICAgICAgY2FzZSAndW5kZWZpbmVkJzpcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ29iamVjdCc6XHJcbiAgICAgICAgdGhpcy5hcHBlbmRTb3VyY2VzKGZsb3cpXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGZsb3cgPSBUZW1wbGF0ZS5wcm90b3R5cGUuc2V0RWxlbWVudChmbG93KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgIHRoaXMucGlwZWxpbmUuc3BsaWNlKGluZGV4LCAxLCBmbG93KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGlwZWxpbmUucHVzaChmbG93KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIHByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcclxuICAgIHRoaXMucGlwZWxpbmUgPSBbXTtcclxuICAgIHRoaXMuc291cmNlcyA9IFtdO1xyXG4gIH07XHJcblxyXG4gIHByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuICdbb2JqZWN0ICcgKyB0aGlzLm5hbWUgKyAnXSc7XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gVGVtcGxhdGUoZWxlbWVudCkge1xyXG4gICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICB0aGlzLnNldEVsZW1lbnQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gVGVtcGxhdGU7XHJcbn0oKSk7XHJcblxyXG5uZXcgTnVkaXN0KFRlbXBsYXRlKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
